<div class="max-w-6xl mx-auto space-y-6">
  <!-- Header -->
  <div class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-2xl p-8 text-white shadow-xl shadow-blue-500/20">
    <div class="flex items-center space-x-4 mb-3">
      <div class="p-3 bg-white/20 backdrop-blur-md rounded-xl">
        <lucide-angular [img]="SparklesIcon" class="w-8 h-8"></lucide-angular>
      </div>
      <h1 class="text-3xl font-black tracking-tight">AI Policy Recommendation Engine</h1>
    </div>
    <p class="text-lg opacity-90 font-medium ml-1">Get personalized policy recommendations based on employee needs and historical data analysis.</p>
  </div>

  <!-- Input Form -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-8">
    <h3 class="text-gray-900 dark:text-white mb-6 text-xl font-black flex items-center space-x-2">
        <div class="w-1.5 h-6 bg-blue-600 rounded-full"></div>
        <span>Employee & Coverage Details</span>
    </h3>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
      <div>
        <label class="block text-gray-700 dark:text-gray-300 mb-2 text-xs font-bold uppercase tracking-widest">Employee Type</label>
        <select
          [ngModel]="employeeType()"
          (ngModelChange)="employeeType.set($event)"
          class="w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-bold text-sm transition"
        >
          <option value="">Select employee type</option>
          <option value="full-time">Full-Time Employee</option>
          <option value="part-time">Part-Time Employee</option>
          <option value="contractor">Contractor</option>
          <option value="intern">Intern</option>
          <option value="executive">Executive</option>
        </select>
      </div>

      <div>
        <label class="block text-gray-700 dark:text-gray-300 mb-2 text-xs font-bold uppercase tracking-widest">Department</label>
        <select
          [ngModel]="department()"
          (ngModelChange)="department.set($event)"
          class="w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-bold text-sm transition"
        >
          <option value="">Select department</option>
          <option value="engineering">Engineering</option>
          <option value="sales">Sales</option>
          <option value="marketing">Marketing</option>
          <option value="hr">Human Resources</option>
          <option value="finance">Finance</option>
          <option value="operations">Operations</option>
        </select>
      </div>
    </div>

    <div class="mb-8">
      <label class="block text-gray-700 dark:text-gray-300 mb-4 text-xs font-bold uppercase tracking-widest">Coverage Needs (Select all that apply)</label>
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <button
          *ngFor="let option of coverageOptions"
          (click)="handleCoverageToggle(option)"
          [class]="'px-4 py-4 rounded-xl border-2 transition text-left group ' + (coverageNeeds().includes(option) ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 shadow-lg shadow-blue-500/10' : 'border-gray-100 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-blue-200 dark:hover:border-blue-800')"
        >
          <div class="flex items-center justify-between">
            <span class="text-sm font-bold">{{ option }}</span>
            <lucide-angular *ngIf="coverageNeeds().includes(option)" [img]="CheckCircleIcon" class="w-5 h-5 ml-2 text-blue-600 animate-in zoom-in-50 duration-300"></lucide-angular>
          </div>
        </button>
      </div>
    </div>

    <button
      (click)="handleGenerate()"
      [disabled]="generating() || !employeeType() || !department() || coverageNeeds().length === 0"
      class="w-full flex items-center justify-center space-x-3 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl hover:from-blue-700 hover:to-purple-700 transition disabled:opacity-50 font-black text-lg shadow-xl shadow-blue-500/20 active:scale-[0.98]"
    >
      <ng-container *ngIf="generating()">
        <div class="w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"></div>
        <span>Generating Recommendations...</span>
      </ng-container>
      <ng-container *ngIf="!generating()">
        <lucide-angular [img]="SparklesIcon" class="w-6 h-6"></lucide-angular>
        <span>Generate AI Recommendations</span>
      </ng-container>
    </button>
  </div>

  <!-- Recommended Policies -->
  <ng-container *ngIf="generated()">
    <div class="bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/10 dark:to-teal-900/10 border-2 border-emerald-100 dark:border-emerald-800 rounded-2xl p-8 animate-in slide-in-from-top-4 duration-500">
      <div class="flex items-start space-x-5">
        <div class="w-14 h-14 bg-emerald-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-emerald-500/30">
          <lucide-angular [img]="CheckCircleIcon" class="w-8 h-8 text-white"></lucide-angular>
        </div>
        <div>
          <p class="text-emerald-900 dark:text-emerald-400 font-black text-xl mb-1">AI Analysis Complete!</p>
          <p class="text-emerald-800 dark:text-emerald-600 font-medium leading-relaxed">
            Based on the employee profile <span class="font-bold underlineDecoration-emerald-500/50">({{ employeeType() }} in {{ department() }})</span> and selected coverage needs,
            we've identified <span class="font-bold">{{ recommendedPolicies.length }} highly suitable policies</span> with maximum compliance matching.
          </p>
        </div>
      </div>
    </div>

    <div>
      <div class="flex items-center justify-between mb-8">
        <h3 class="text-gray-900 dark:text-white text-xl font-black">Recommended Policy Templates</h3>
        <div class="flex items-center space-x-2 text-purple-600 bg-purple-50 dark:bg-purple-900/20 px-4 py-2 rounded-full border border-purple-100 dark:border-purple-800">
          <lucide-angular [img]="SparklesIcon" class="w-5 h-5 animate-pulse"></lucide-angular>
          <span class="font-black text-xs uppercase tracking-widest">AI Powered</span>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div
          *ngFor="let policy of recommendedPolicies"
          class="bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 p-8 hover:shadow-2xl transition duration-500 group relative overflow-hidden"
        >
          <div class="absolute -right-4 -top-4 w-24 h-24 bg-blue-600/5 rounded-full group-hover:scale-150 transition-transform duration-700"></div>
          
          <!-- Score Badge -->
          <div class="flex items-center justify-between mb-6 relative z-10">
            <span class="bg-blue-600 text-white px-4 py-1.5 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg shadow-blue-500/30">
              {{ policy.type }}
            </span>
            <div class="flex items-center space-x-1.5 bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-lg border border-emerald-100 dark:border-emerald-800">
              <lucide-angular [img]="TrendingUpIcon" class="w-4 h-4 text-emerald-600"></lucide-angular>
              <span class="text-emerald-600 font-black text-[10px] uppercase tracking-tighter">{{ policy.score }}% MATCH</span>
            </div>
          </div>

          <!-- Policy Name -->
          <h4 class="text-gray-900 dark:text-white text-lg font-black mb-4 relative z-10">{{ policy.name }}</h4>

          <!-- Coverage & Premium -->
          <div class="flex items-center justify-between mb-6 pb-6 border-b border-gray-100 dark:border-gray-700 relative z-10">
            <div>
              <p class="text-gray-400 text-[10px] uppercase font-bold tracking-widest mb-1">Coverage</p>
              <p class="text-gray-900 dark:text-white font-black text-lg">{{ policy.coverage }}</p>
            </div>
            <div class="text-right">
              <p class="text-gray-400 text-[10px] uppercase font-bold tracking-widest mb-1">Premium</p>
              <p class="text-blue-600 dark:text-blue-400 font-black text-lg">{{ policy.premium }}</p>
            </div>
          </div>

          <!-- Features -->
          <div class="mb-8 relative z-10">
            <p class="text-gray-400 text-[10px] uppercase font-bold tracking-widest mb-4">Key Features</p>
            <ul class="space-y-3">
              <li *ngFor="let feature of policy.features" class="flex items-start space-x-3 text-gray-700 dark:text-gray-300">
                <div class="p-1 bg-emerald-50 dark:bg-emerald-900/20 rounded-full mt-0.5">
                    <lucide-angular [img]="CheckCircleIcon" class="w-3 h-3 text-emerald-600"></lucide-angular>
                </div>
                <span class="text-sm font-medium leading-tight">{{ feature }}</span>
              </li>
            </ul>
          </div>

          <!-- Actions -->
          <div class="space-y-3 relative z-10">
            <button class="w-full px-6 py-3.5 bg-blue-600 text-white rounded-2xl hover:bg-blue-700 transition font-black text-sm shadow-xl shadow-blue-500/20 active:scale-95">
              Select Policy
            </button>
            <button class="w-full px-6 py-3.5 border-2 border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-700 transition font-bold text-sm">
              View Details
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Generate Draft Policy -->
    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 p-10 relative overflow-hidden group">
      <div class="absolute right-0 top-0 w-64 h-64 bg-gradient-to-br from-blue-600/5 to-purple-600/5 transform rotate-45 translate-x-32 -translate-y-32 transition-transform duration-1000 group-hover:scale-105"></div>
      
      <div class="flex flex-col lg:flex-row items-center justify-between gap-10 relative z-10">
        <div class="max-w-xl">
          <h3 class="text-gray-900 dark:text-white text-2xl font-black mb-3">Generate Custom Policy Draft</h3>
          <p class="text-gray-600 dark:text-gray-400 font-medium text-lg mb-8 leading-relaxed">
            Create a professional, compliant, and tailored policy document instantly based on your specific AI-driven selections.
          </p>
          
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8">
            <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-800/50">
              <p class="text-blue-900 dark:text-blue-300 text-[10px] font-black uppercase mb-1 tracking-widest">Type</p>
              <p class="text-blue-700 dark:text-blue-400 font-bold capitalize">{{ employeeType() }}</p>
            </div>
            <div class="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-2xl border border-purple-100 dark:border-purple-800/50">
              <p class="text-purple-900 dark:text-purple-300 text-[10px] font-black uppercase mb-1 tracking-widest">Dept</p>
              <p class="text-purple-700 dark:text-purple-400 font-bold capitalize">{{ department() }}</p>
            </div>
            <div class="p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-2xl border border-emerald-100 dark:border-emerald-800/50">
                <p class="text-emerald-900 dark:text-emerald-300 text-[10px] font-black uppercase mb-1 tracking-widest">Items</p>
                <p class="text-emerald-700 dark:text-emerald-400 font-bold">{{ coverageNeeds().length }} Selected</p>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row gap-4">
            <button class="flex-1 flex items-center justify-center space-x-3 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl hover:from-blue-700 hover:to-purple-700 transition font-black text-lg shadow-xl shadow-blue-500/20 active:scale-95">
              <lucide-angular [img]="SparklesIcon" class="w-6 h-6"></lucide-angular>
              <span>Generate Draft Policy</span>
            </button>
            <button class="px-8 py-4 border-2 border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-700 transition flex items-center justify-center space-x-3 font-bold">
              <lucide-angular [img]="DownloadIcon" class="w-5 h-5"></lucide-angular>
              <span>Template</span>
            </button>
          </div>
        </div>
        
        <div class="w-full lg:w-1/3 flex justify-center">
            <div class="w-48 h-48 bg-blue-100 dark:bg-blue-900/30 rounded-3xl flex items-center justify-center relative group">
                <div class="absolute inset-0 bg-blue-600/10 rounded-3xl animate-ping group-hover:animate-none"></div>
                <lucide-angular [img]="FileTextIcon" class="w-24 h-24 text-blue-600 dark:text-blue-400 relative z-10"></lucide-angular>
            </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
